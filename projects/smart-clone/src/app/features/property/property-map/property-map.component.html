<smart-clone-property-map-nav [isLoading]="(isLoading$ | async) !== false"></smart-clone-property-map-nav>

<smartmap-map [config]="mapConfig">
  <smartmap-source
    id="geojson"
    [data]="currentData$ | async"
    [maxZoom]="17"
    [zoomPadding]="60"
    [zoomToFit]="true"
  ></smartmap-source>

  <ng-container *ngIf="currentView$ | async as currentView">
    <!-- Property List -->
    <smartmap-layer
      id="property-list"
      sourceId="geojson"
      type="circle"
      [paint]="{
        'circle-radius': 30,
        'circle-color': '#fecccc',
        'circle-opacity': 0.75,
        'circle-stroke-width': 3,
        'circle-stroke-color': '#e09494',
        'circle-stroke-opacity': 1
      }"
      [interactive]="true"
      [visible]="currentView === 'property-list'"
      (click)="onPropertyListClick($event)"
    ></smartmap-layer>

    <!-- Property Details -->
    <smartmap-layer
      id="property-details"
      sourceId="geojson"
      type="circle"
      [paint]="{
        'circle-radius': 30,
        'circle-color': '#75acff',
        'circle-opacity': 0.75,
        'circle-stroke-width': 3,
        'circle-stroke-color': '#5193f7',
        'circle-stroke-opacity': 1
      }"
      [visible]="currentView === 'property-details'"
    ></smartmap-layer>

    <!-- Charles' Home -->
    <smartmap-layer
      id="property-charles"
      sourceId="geojson"
      type="circle"
      [paint]="{
        'circle-radius': 30,
        'circle-color': '#75acff',
        'circle-opacity': 0.75,
        'circle-stroke-width': 3,
        'circle-stroke-color': '#5193f7',
        'circle-stroke-opacity': 1
      }"
      [visible]="currentView === 'property-charles'"
    ></smartmap-layer>
  </ng-container>
</smartmap-map>
